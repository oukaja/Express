<!DOCTYPE html>
<html>

<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap-arabic.css' %}">


    <meta charset="utf-8">
    <title>Article Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div class="fixed-top navbar-light bg-light">
        <div class="container">
            <h1>Bootstrap Blog Template</h1>
            <p>This responsive Blog template is done in Bootstrap 3 with no extra CSS or Javascript</p>
        </div>
    </div>


    <div class="p-5"></div>
    <div class="p-3"></div>

    <div class="container">
        <div class="row">

            <div class="col-sm-6 col-md-3 col-lg-3">
                <div class="sticky-top">
                    <div class="card my-4">
                        <h5 class="card-header">: تاريخ اليوم</h5>
                        <div class="card-body">
                            <p class="font-weight-bold d-flex justify-content-center" id="date"></p>
                        </div>
                    </div>
                    <div class="card my-4">
                        <h5 class="card-header"> : إختر مدينتك</h5>
                        <div class="card-body">
                            <select class="form-control" name="city" id="city"
                                onchange="getData(document.getElementById('city').value)">
                                <option value='Figuig'> فكيك</option>
                                <option value='Oujda'> وجدة</option>
                                <option value='Bouarfa'> بوعرفة</option>
                                <option value='Jerada'> جرادة</option>
                                <option value='Berkane'> بركان</option>
                                <option value='Taourirt'> تاوريرت</option>
                                <option value='Nador'> الناظور</option>
                                <option value='Melilla'> مليلية</option>
                                <option value='Bouanane'> بوعنان</option>
                                <option value='Guercif'> كرسيف</option>
                                <option value='Al Hoceima'> الحسيمة</option>
                                <option value='Missour'> ميسور</option>
                                <option value='Taza'> تازة</option>
                                <option value='Bourd'> بورد</option>
                                <option value='Erfoud'> أرفود</option>
                                <option value='Rissani'> الريصاني</option>
                                <option value='Oued Amlil'> واد أمليل</option>
                                <option value='Tahla'> تاهلة</option>
                                <option value='Errachidia'> الراشدية</option>
                                <option value='Er-Rich'> الريش</option>
                                <option value='Taounate'> تاونات</option>
                                <option value='Boulemane'> بولمان</option>
                                <option value='Midelt'> ميدلت</option>
                                <!---->
                                <option value='Sefrou'> صفرو</option>
                                <option value='Goulmima'> كلميمة</option>
                                <option value='Fes'> فاس</option>
                                <option value='Tinejdad'> تنجداد</option>
                                <option value='Ifrane'> إفران</option>
                                <option value='Moulay Yaâcoub'> مولاي يعقوب</option>
                                <option value='Azrou'> آزرو</option>
                                <option value='Chefchaouen'> شفشاون</option>
                                <option value='Sebta'> سبتة</option>
                                <option value='Tétouan'> تطوان</option>
                                <option value='El Hajeb'> الحاجب</option>
                                <option value='Meknès'> مكناس</option>
                                <option value='Ouazzane'> وزان</option>
                                <option value='Khénifra'> خنيفرة</option>
                                <option value='Sidi Kacem'> سيدي قاسم</option>
                                <option value='Tanger'> طنجة</option>
                                <option value='Zagora'> زاكورة</option>
                                <option value='Ksar El Kébir'> القصر الكبير</option>
                                <option value='Sidi Slimane'> سيدي سليمان</option>
                                <option value='Souk El Arbaa'> سوق أربعاء الغرب</option>
                                <option value='Assilah'> أصيلا</option>
                                <option value='Khémisset'> الخميسات</option>
                                <option value='Kelaat-MGouna'> قلعة مكونة</option>
                                <option value='Larache'> العرائش</option>
                                <option value='Kasba Tadla'> قصبة تادلة</option>
                                <option value='Sidi Yahya El Gharb'> سيدي يحيى الغرب</option>
                                <option value='Tiflet'> تيفلت</option>
                                <option value='Béni Mellal'> بني ملال</option>
                                <option value='Oued Zem'> واد زم</option>
                                <option value='Azilal'> أزيلال</option>
                                <option value='Kénitra'> القنيطرة</option>
                                <option value='Rommani'> الرماني</option>
                                <option value='Rabat' selected=selected> الرباط وسلا</option>
                                <option value='Khouribga'> خريبكة</option>
                                <option value='Ouarzazate'> ورزازات</option>
                                <option value='Demnate'> دمنات</option>
                                <option value='Benslimane'> بن سليمان</option>
                                <option value='Bouznika'> بوزنيقة</option>
                                <option value='El Gara'> الكارة</option>
                                <option value='Mohammédia'> المحمدية</option>
                                <option value='El Kelaâ des Sraghna'> قلعة السراغنة</option>
                                <option value='Berrechid'> برشيد</option>
                                <option value='Settat'> سطات</option>
                                <option value='Casablanca'> الدار البيضاء</option>
                                <option value='Taliouine'> تالوين</option>
                                <option value='Ben Guerir'> بنكرير</option>
                                <option value='Tata'> طاطا</option>
                                <option value='Marrakech'> مراكش</option>
                                <option value='Akka'> أقا</option>
                                <option value='Azemmour'> آزمور</option>
                                <option value='El Jadida'> الجديدة</option>
                                <option value='Youssoufia'> اليوسفبة</option>
                                <option value='Taroudant'> تارودانت</option>
                                <option value='Tafraout'> تافراوت</option>
                                <option value='Safi'> آسفي</option>
                                <option value='Zag'> الزاك</option>
                                <option value='Assa'> أسا</option>
                                <option value='Agadir'> أكادير</option>
                                <option value='Tiznit'> تزنيت</option>
                                <option value='Essaouira'> الصويرة</option>
                                <option value='Guelmim'> كلميم</option>
                                <option value='Sidi Ifni'> سيدي إفني</option>
                                <option value='Tan-Tan'> طانطان</option>
                                <option value='Es-Semara'> السمارة</option>
                                <option value='Tarfaya'> طرفاية</option>
                                <option value='Laâyoune'> العيون</option>
                                <option value='Boujdour'> بوجدور</option>
                                <option value='Dakhla'> الداخلة</option>
                                <option value='Lagouira'> الكويرة</option>
                                <option value='Alnif'> ألنيف</option>
                                <option value='Bejaâd'> ابي الجعد</option>
                            </select>
                        </div>
                    </div>
                    <div class="card my-4">
                        <h5 class="card-header"> : مواقيت الصلاة</h5>
                        <div class="card-body table-responsive" >


                            <table class="table table-bordered">
                                <tbody>
                                    <tr>

                                        <td class="font-weight-bold">الفجر</td>
                                        <td id="fajr"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الشروق</td>
                                        <td id="sunrise"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الظهر</td>
                                        <td id="duhr"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">العصر</td>
                                        <td id="asr"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">المغرب</td>
                                        <td id="maghrib"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">العشاء</td>
                                        <td id="isha"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-sm-6 col-md-6 col-lg-6">
                <div class="row">



                    <div class="card mb-4">

                        {% block content %}
                        {% endblock %}

                    </div>




                </div>
            </div>




            <div class="col-sm-6 col-md-3 col-lg-3">
                <div class="sticky-top">
                    <div class="card my-4">
                        <h5 class="card-header"> : أحوال الطقس</h5>
                        <div class="card-body table-responsive" >


                                <table class="table table-bordered">
                                <tbody>

                                    <tr>

                                        <td class="font-weight-bold">الشروق</td>
                                        <td id="sunrisee"></td>

                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الغروب</td>
                                        <td id="sunset"></td>

                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الرطوبة</td>
                                        <td id="humidity"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الرياح </td>
                                        <td id="speed"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">درجة الحرارة</td>
                                        <td id="weather"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الحرارة الدنيا</td>
                                        <td id="min"></td>
                                    </tr>
                                    <tr>

                                        <td class="font-weight-bold">الحرارة القصوى</td>
                                        <td id="max"></td>
                                    </tr>

                                </tbody>
                            </table>


                        </div>
                    </div>
                    <div class="card my-4">
                        <h5 class="card-header"> : تابعنا على</h5>
                        <div class="card-body d-flex justify-content-center">
                            <button type="button" class="btn btn-fb"><i class="fa fa-facebook pr-1"></i>
                                Facebook</button>&nbsp;
                            <button type="button" class="btn btn-tw"><i class="fa fa-twitter pr-1"></i> Twitter</button>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <div class="p-5"></div>


    <div class="fixed-bottom navbar-light bg-light">
        <p class="text-center">
            © Copyright 2018. All Rights Reserved. | Powered By
            <a href="https://www.linkedin.com/in/oukajayoussefmehdi/">
                Youssef Mehdi OUKAJA
            </a>

        </p>
    </div>

</body>
<!-- <script
  src="https://code.jquery.com/jquery-1.9.0.js"
  integrity="sha256-TXsBwvYEO87oOjPQ9ifcb7wn3IrrW91dhj6EMEtRLvM="
  crossorigin="anonymous"></script> -->
<script src="{% static 'js/jquery.js' %}"></script>
<script src="{% static 'js/bootstrap-arabic.js' %}"></script>
<script src="{% static 'js/waypoint.js' %}"></script>
<script src="{% static 'js/infinite.js' %}"></script>
<script src="{% static 'js/crypto-js.js' %}"></script>

<style>
    body {
        position: sticky;
    }
</style>
<script>

    function getData(city) {
        var url = 'https://weather-ydn-yql.media.yahoo.com/forecastrss';
        var method = 'GET';
        var app_id = '3yBXhw3e';
        var consumer_key = 'dj0yJmk9Tm13MGhSYWU3bUhLJnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTdh';
        var consumer_secret = 'c40d05727b885134bc6720cd8b275229ef4146b1';
        var concat = '&';
        var query = { 'location': city, 'format': 'json', 'u': 'c' };
        var oauth = {
            'oauth_consumer_key': consumer_key,
            'oauth_nonce': Math.random().toString(36).substring(2),
            'oauth_signature_method': 'HMAC-SHA1',
            'oauth_timestamp': parseInt(new Date().getTime() / 1000).toString(),
            'oauth_version': '1.0'
        };

        var merged = {};
        $.extend(merged, query, oauth);
        // Note the sorting here is required
        var merged_arr = Object.keys(merged).sort().map(function (k) {
            return [k + '=' + encodeURIComponent(merged[k])];
        });
        var signature_base_str = method
            + concat + encodeURIComponent(url)
            + concat + encodeURIComponent(merged_arr.join(concat));

        var composite_key = encodeURIComponent(consumer_secret) + concat;
        var hash = CryptoJS.HmacSHA1(signature_base_str, composite_key);
        var signature = hash.toString(CryptoJS.enc.Base64);

        oauth['oauth_signature'] = signature;
        var auth_header = 'OAuth ' + Object.keys(oauth).map(function (k) {
            return [k + '="' + oauth[k] + '"'];
        }).join(',');

        $.ajax({
            url: url + '?' + $.param(query),
            headers: {
                'Authorization': auth_header,
                'X-Yahoo-App-Id': app_id
            },
            method: 'GET',
            success: function (data) {
                console.log(data);
                $("#humidity").empty().append(data.current_observation.atmosphere.humidity + " % ");
                $("#speed").empty().append(data.current_observation.wind.speed + " كم/س ");
                $("#weather").empty().append(data.current_observation.condition.temperature + "°");
                $("#min").empty().append(data.forecasts["0"].high + "°");
                $("#max").empty().append(data.forecasts["0"].low + "°");
            }
        });

        $.ajax({
            url: "http://api.aladhan.com/v1/timingsByCity?city=" + city + "&country=Morocco&method=5",
            dataType: "JSON",
            type: "get",
            success: function (data) {
                $("#fajr").empty().append(data.data.timings.Fajr);
                $("#sunrise").empty().append(data.data.timings.Sunrise);
                $("#duhr").empty().append(data.data.timings.Dhuhr);
                $("#asr").empty().append(data.data.timings.Asr);
                $("#maghrib").empty().append(data.data.timings.Maghrib);
                $("#isha").empty().append(data.data.timings.Isha);
                $("#date").empty().append(data.data.date.gregorian.date);
                $("#sunset").empty().append(data.data.timings.Sunset);
                $("#sunrisee").empty().append(data.data.timings.Sunrise);

            }
        });
    }
    $('#city').ready(getData("rabat"));

    // $('#city').change(getSalateData($('#city').val()));




</script>

</html>